2025-07-21 09:36:27 [info]: Logger initialized successfully
2025-07-21 09:36:28 [info]: Server + Bot listening on port 3000
2025-07-21 09:36:28 [info]: Connected to MongoDB
2025-07-21 09:36:29 [info]: Telegram webhook set to https://1ac9191e4ce5.ngrok-free.app/bot8072384960:AAHDk5NfJFPW1oAlyyDtLzKGqukUQFAURmc
2025-07-21 09:36:29 [info]: Telegram bot commands set
2025-07-21 09:38:46 [info]: Received GET /api/notifications
2025-07-21 09:38:46 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
2025-07-21 09:38:46 [info]: Received GET /api/notifications
2025-07-21 09:38:46 [error]: Authentication failed
JsonWebTokenError: jwt malformed
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:70:17)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:175:3)
2025-07-21 09:45:32 [info]: Received POST /api/login
2025-07-21 09:45:32 [info]: Login attempt:
2025-07-21 09:45:33 [info]: Login successful:
2025-07-21 09:45:34 [info]: Received GET /api/notifications
2025-07-21 09:45:34 [info]: Received GET /api/warehouses
2025-07-21 09:45:34 [info]: Received GET /api/notifications
2025-07-21 09:45:34 [info]: Received GET /api/warehouses
2025-07-21 09:45:34 [info]: Received GET /api/products
2025-07-21 09:45:34 [info]: Received GET /api/lots
2025-07-21 09:45:34 [info]: Received GET /api/warehouses
2025-07-21 09:45:34 [info]: Received GET /api/lot-management/expiring
2025-07-21 09:45:34 [info]: Fetching expiring lots
2025-07-21 09:45:34 [info]: Received GET /api/manage-damage/history?limit=5&sort=desc
2025-07-21 09:45:34 [info]: Received GET /api/warehouses
2025-07-21 09:45:34 [info]: Received GET /api/products
2025-07-21 09:45:34 [info]: Expiring lots found:
2025-07-21 09:45:34 [info]: Received GET /api/lots
2025-07-21 09:45:34 [info]: Received GET /api/lot-management/expiring
2025-07-21 09:45:34 [info]: Fetching expiring lots
2025-07-21 09:45:34 [info]: Expiring lots found:
2025-07-21 09:45:34 [info]: Received GET /api/manage-damage/history?limit=5&sort=desc
2025-07-21 09:45:34 [info]: Received GET /api/settings
2025-07-21 09:45:34 [info]: Fetched settings
2025-07-21 09:45:34 [info]: Received GET /api/settings
2025-07-21 09:45:34 [info]: Fetched settings
2025-07-21 09:46:04 [info]: Received GET /api/notifications
2025-07-21 09:46:34 [info]: Received GET /api/notifications
2025-07-21 09:47:04 [info]: Received GET /api/notifications
2025-07-21 09:47:34 [info]: Received GET /api/notifications
2025-07-21 09:48:04 [info]: Received GET /api/notifications
2025-07-21 09:48:34 [info]: Received GET /api/notifications
2025-07-21 09:49:04 [info]: Received GET /api/notifications
2025-07-21 09:50:04 [info]: Received GET /api/notifications
2025-07-21 09:50:34 [info]: Received GET /api/notifications
2025-07-21 09:50:35 [info]: Received GET /api/warehouses
2025-07-21 09:50:35 [info]: Received GET /api/manage-damage/history?startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 09:50:35 [info]: Received GET /api/warehouses
2025-07-21 09:50:35 [info]: Received GET /api/manage-damage/history?startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 09:50:35 [info]: Received GET /api/warehouses
2025-07-21 09:50:35 [info]: Received GET /api/lot-management/expiring?warehouse=
2025-07-21 09:50:35 [info]: Fetching expiring lots
2025-07-21 09:50:35 [info]: Received GET /api/settings
2025-07-21 09:50:36 [info]: Received GET /api/lot-management?searchQuery=&warehouse=all&page=1&limit=25
2025-07-21 09:50:36 [info]: Fetching lot management data
2025-07-21 09:50:36 [info]: Received GET /api/warehouses
2025-07-21 09:50:36 [info]: Fetched settings
2025-07-21 09:50:36 [info]: Received GET /api/settings
2025-07-21 09:50:36 [info]: Expiring lots found:
2025-07-21 09:50:36 [info]: Fetched settings
2025-07-21 09:50:36 [info]: Received GET /api/lot-management/expiring?warehouse=
2025-07-21 09:50:36 [info]: Fetching expiring lots
2025-07-21 09:50:36 [info]: Received GET /api/lot-management?searchQuery=&warehouse=all&page=1&limit=25
2025-07-21 09:50:36 [info]: Fetching lot management data
2025-07-21 09:50:36 [info]: Expiring lots found:
2025-07-21 09:50:37 [info]: Received GET /api/categories
2025-07-21 09:50:37 [info]: Received GET /api/products
2025-07-21 09:50:37 [info]: Received GET /api/categories
2025-07-21 09:50:37 [info]: Received GET /api/products
2025-07-21 09:50:39 [info]: Received GET /api/warehouses
2025-07-21 09:50:39 [info]: Received GET /api/products
2025-07-21 09:50:39 [info]: Received GET /api/categories
2025-07-21 09:50:39 [info]: Received GET /api/adjust-stock/history
2025-07-21 09:50:39 [info]: Received GET /api/warehouses
2025-07-21 09:50:39 [info]: Received GET /api/categories
2025-07-21 09:50:39 [info]: Received GET /api/products
2025-07-21 09:50:39 [info]: Received GET /api/adjust-stock/history
2025-07-21 09:50:41 [info]: Received GET /api/products
2025-07-21 09:50:41 [info]: Received GET /api/categories
2025-07-21 09:50:41 [info]: Received GET /api/warehouses
2025-07-21 09:50:41 [info]: Received GET /api/suppliers
2025-07-21 09:50:41 [info]: Received GET /api/categories
2025-07-21 09:50:41 [info]: Received GET /api/warehouses
2025-07-21 09:50:41 [info]: Received GET /api/products
2025-07-21 09:50:41 [info]: Received GET /api/suppliers
2025-07-21 09:50:42 [info]: Received GET /api/warehouses
2025-07-21 09:50:42 [info]: Received GET /api/products
2025-07-21 09:50:42 [info]: Received GET /api/categories
2025-07-21 09:50:42 [info]: Received GET /api/transfer-history?status=Pending&startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 09:50:42 [info]: Received GET /api/warehouses
2025-07-21 09:50:42 [info]: Received GET /api/categories
2025-07-21 09:50:42 [info]: Received GET /api/products
2025-07-21 09:50:42 [info]: Received GET /api/transfer-history?status=Pending&startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 09:51:04 [info]: Received GET /api/notifications
2025-07-21 09:51:34 [info]: Received GET /api/notifications
2025-07-21 09:52:04 [info]: Received GET /api/notifications
2025-07-21 09:53:04 [info]: Received GET /api/notifications
2025-07-21 09:54:04 [info]: Received GET /api/notifications
2025-07-21 09:55:04 [info]: Received GET /api/notifications
2025-07-21 09:56:04 [info]: Received GET /api/notifications
2025-07-21 09:57:04 [info]: Received GET /api/notifications
2025-07-21 09:58:04 [info]: Received GET /api/notifications
2025-07-21 09:59:04 [info]: Received GET /api/notifications
2025-07-21 10:00:04 [info]: Received GET /api/notifications
2025-07-21 10:01:04 [info]: Received GET /api/notifications
2025-07-21 10:02:04 [info]: Received GET /api/notifications
2025-07-21 10:03:04 [info]: Received GET /api/notifications
2025-07-21 10:04:04 [info]: Received GET /api/notifications
2025-07-21 10:05:04 [info]: Received GET /api/notifications
2025-07-21 10:06:04 [info]: Received GET /api/notifications
2025-07-21 10:07:04 [info]: Received GET /api/notifications
2025-07-21 10:08:04 [info]: Received GET /api/notifications
2025-07-21 10:09:04 [info]: Received GET /api/notifications
2025-07-21 10:10:04 [info]: Received GET /api/notifications
2025-07-21 10:11:04 [info]: Received GET /api/notifications
2025-07-21 10:12:04 [info]: Received GET /api/notifications
2025-07-21 10:12:19 [info]: Received GET /api/warehouses
2025-07-21 10:12:19 [info]: Received GET /api/lot-management/expiring?warehouse=
2025-07-21 10:12:19 [info]: Fetching expiring lots
2025-07-21 10:12:19 [info]: Received GET /api/settings
2025-07-21 10:12:19 [info]: Received GET /api/lot-management?searchQuery=&warehouse=all&page=1&limit=25
2025-07-21 10:12:19 [info]: Fetching lot management data
2025-07-21 10:12:19 [info]: Fetched settings
2025-07-21 10:12:19 [info]: Received GET /api/warehouses
2025-07-21 10:12:19 [info]: Received GET /api/settings
2025-07-21 10:12:19 [info]: Expiring lots found:
2025-07-21 10:12:19 [info]: Fetched settings
2025-07-21 10:12:19 [info]: Received GET /api/lot-management/expiring?warehouse=
2025-07-21 10:12:19 [info]: Fetching expiring lots
2025-07-21 10:12:19 [info]: Received GET /api/lot-management?searchQuery=&warehouse=all&page=1&limit=25
2025-07-21 10:12:19 [info]: Fetching lot management data
2025-07-21 10:12:19 [info]: Expiring lots found:
2025-07-21 10:12:19 [info]: Received GET /api/warehouses
2025-07-21 10:12:19 [info]: Received GET /api/manage-damage/history?startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 10:12:19 [info]: Received GET /api/warehouses
2025-07-21 10:12:19 [info]: Received GET /api/manage-damage/history?startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 10:12:20 [info]: Received GET /api/products
2025-07-21 10:12:20 [info]: Received GET /api/categories
2025-07-21 10:12:20 [info]: Received GET /api/categories
2025-07-21 10:12:20 [info]: Received GET /api/products
2025-07-21 10:12:21 [info]: Received GET /api/products
2025-07-21 10:12:21 [info]: Received GET /api/categories
2025-07-21 10:12:21 [info]: Received GET /api/warehouses
2025-07-21 10:12:21 [info]: Received GET /api/suppliers
2025-07-21 10:12:21 [info]: Received GET /api/categories
2025-07-21 10:12:21 [info]: Received GET /api/warehouses
2025-07-21 10:12:21 [info]: Received GET /api/products
2025-07-21 10:12:21 [info]: Received GET /api/suppliers
2025-07-21 10:12:22 [info]: Received GET /api/warehouses
2025-07-21 10:12:22 [info]: Received GET /api/products
2025-07-21 10:12:22 [info]: Received GET /api/categories
2025-07-21 10:12:22 [info]: Received GET /api/transfer-history?status=Pending&startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 10:12:22 [info]: Received GET /api/warehouses
2025-07-21 10:12:22 [info]: Received GET /api/categories
2025-07-21 10:12:22 [info]: Received GET /api/products
2025-07-21 10:12:22 [info]: Received GET /api/transfer-history?status=Pending&startDate=2025-07-20T17:00:00.000Z&endDate=2025-07-21T16:59:59.999Z
2025-07-21 10:12:34 [info]: Received GET /api/notifications
2025-07-21 10:13:04 [info]: Received GET /api/notifications
2025-07-21 10:14:04 [info]: Received GET /api/notifications
2025-07-21 10:15:04 [info]: Received GET /api/notifications
2025-07-21 10:16:04 [info]: Received GET /api/notifications
2025-07-21 10:17:04 [info]: Received GET /api/notifications
2025-07-21 10:18:04 [info]: Received GET /api/notifications
2025-07-21 10:19:04 [info]: Received GET /api/notifications
2025-07-21 10:20:04 [info]: Received GET /api/notifications
2025-07-21 10:21:04 [info]: Received GET /api/notifications
2025-07-21 10:22:04 [info]: Received GET /api/notifications
2025-07-21 10:23:04 [info]: Received GET /api/notifications
2025-07-21 10:24:04 [info]: Received GET /api/notifications
2025-07-21 10:25:04 [info]: Received GET /api/notifications
2025-07-21 10:26:04 [info]: Received GET /api/notifications
2025-07-21 10:27:04 [info]: Received GET /api/notifications
2025-07-21 10:28:04 [info]: Received GET /api/notifications
2025-07-21 10:29:04 [info]: Received GET /api/notifications
2025-07-21 10:30:04 [info]: Received GET /api/notifications
2025-07-21 10:31:04 [info]: Received GET /api/notifications
2025-07-21 10:32:04 [info]: Received GET /api/notifications
2025-07-21 10:33:04 [info]: Received GET /api/notifications
2025-07-21 10:34:04 [info]: Received GET /api/notifications
2025-07-21 10:35:04 [info]: Received GET /api/notifications
2025-07-21 10:36:04 [info]: Received GET /api/notifications
2025-07-21 10:36:55 [info]: Received GET /api/notifications
2025-07-21 10:37:04 [info]: Received GET /api/notifications
2025-07-21 10:37:34 [info]: Received GET /api/notifications
2025-07-21 10:38:04 [info]: Received GET /api/notifications
2025-07-21 10:39:04 [info]: Received GET /api/notifications
2025-07-21 10:40:04 [info]: Received GET /api/notifications
2025-07-21 10:41:04 [info]: Received GET /api/notifications
2025-07-21 10:42:04 [info]: Received GET /api/notifications
2025-07-21 10:43:04 [info]: Received GET /api/notifications
2025-07-21 10:44:04 [info]: Received GET /api/notifications
2025-07-21 10:45:04 [info]: Received GET /api/notifications
2025-07-21 10:46:04 [info]: Received GET /api/notifications
2025-07-21 10:46:04 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
2025-07-21 10:47:04 [info]: Received GET /api/notifications
2025-07-21 10:47:04 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
2025-07-21 10:48:04 [info]: Received GET /api/notifications
2025-07-21 10:48:04 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
2025-07-21 10:49:04 [info]: Received GET /api/notifications
2025-07-21 10:49:04 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
2025-07-21 10:50:04 [info]: Received GET /api/notifications
2025-07-21 10:50:04 [error]: Authentication failed
TokenExpiredError: jwt expired
    at E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:190:21
    at getSecret (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:97:14)
    at module.exports [as verify] (E:\Personal Documents\Stock-Management\backend\node_modules\jsonwebtoken\verify.js:101:10)
    at authMiddleware (E:\Personal Documents\Stock-Management\backend\src\middleware\auth.js:10:25)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\layer.js:95:5)
    at E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (E:\Personal Documents\Stock-Management\backend\node_modules\express\lib\router\index.js:346:12)
